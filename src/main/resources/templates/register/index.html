<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--	<meta charset="UTF-8">-->
<!--	<title>ユーザー登録</title>-->
<!--	<link rel="stylesheet" href="/css/bootstrap.min.css">-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--	<h2>ユーザー登録</h2>-->
<!--	<form th:action="@{/register}" method="post">-->
<!--		<div class="mb-3">-->
<!--			<label for="name">ユーザー名</label>-->
<!--			<input type="text" class="form-control" id="name" name="name">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="email">メールアドレス</label>-->
<!--			<input type="email" class="form-control" id="email" name="email">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="password">パスワード</label>-->
<!--			<input type="password" class="form-control" id="password" name="password">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="password_confirm">パスワードの確認</label>-->
<!--			<input type="password" class="form-control" id="password_confirm" name="password_confirm">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="family_name">姓</label>-->
<!--			<input type="text" class="form-control" id="family_name" name="family_name">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="first_name">名</label>-->
<!--			<input type="text" class="form-control" id="first_name" name="first_name">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="age">年齢</label>-->
<!--			<select class="form-control" id="age" name="age">-->
<!--				<option value="">選択してください</option>-->
<!--				<th:block th:each="i : ${#numbers.sequence(1, 99)}">-->
<!--					<option th:value="${i}" th:text="${i}"></option>-->
<!--				</th:block>-->
<!--			</select>-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="gender">性別</label>-->
<!--			<select class="form-control" id="gender" name="gender">-->
<!--				<option value="">選択してください</option>-->
<!--				<th:block th:each="gender : ${genderMap}">-->
<!--					<option th:value="${gender.key}" th:text="${gender.value}"></option>-->
<!--				</th:block>-->
<!--			</select>-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="weight">体重</label>-->
<!--			<input type="number" class="form-control" id="weight" name="weight">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="height">身長</label>-->
<!--			<input type="number" class="form-control" id="height" name="height">-->
<!--		</div>-->
<!--		<div class="mb-3">-->
<!--			<label for="profile_image">プロフィール画像</label>-->
<!--			<input type="file" class="form-control" id="profile_image" name="profile_image">-->
<!--		</div>-->
<!--		<button type="submit" class="btn btn-primary">確認</button>-->
<!--		<button type="button" class="btn btn-secondary" onclick="cancelRegistration()">キャンセル</button>-->
<!--	</form>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>ユーザー登録</title>
	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container">
	<h2>ユーザー登録</h2>
	<form id="userForm">
		<div class="mb-3">
			<label for="name">ユーザー名</label>
			<input type="text" class="form-control" id="name" name="name">
		</div>
		<div class="mb-3">
			<label for="email">メールアドレス</label>
			<input type="email" class="form-control" id="email" name="email">
		</div>
		<div class="mb-3">
			<label for="password">パスワード</label>
			<input type="password" class="form-control" id="password" name="password">
		</div>
		<div class="mb-3">
			<label for="password_confirm">パスワードの確認</label>
			<input type="password" class="form-control" id="password_confirm" name="password_confirm">
		</div>
		<div class="mb-3">
			<label for="family_name">姓</label>
			<input type="text" class="form-control" id="family_name" name="family_name">
		</div>
		<div class="mb-3">
			<label for="first_name">名</label>
			<input type="text" class="form-control" id="first_name" name="first_name">
		</div>
		<div class="mb-3">
			<label for="age">年齢</label>
			<select class="form-control" id="age" name="age">
				<option value="">選択してください</option>
				<th:block th:each="i : ${#numbers.sequence(1, 99)}">
					<option th:value="${i}" th:text="${i}"></option>
				</th:block>
			</select>
		</div>
		<div class="mb-3">
			<label for="gender">性別</label>
			<select class="form-control" id="gender" name="gender">
				<option value="">選択してください</option>
				<th:block th:each="gender : ${genderMap}">
					<option th:value="${gender.key}" th:text="${gender.value}"></option>
				</th:block>
			</select>
		</div>
		<div class="mb-3">
			<label for="profile_image">プロフィール画像</label>
			<input type="file" class="form-control" id="profile_image" name="profile_image">
		</div>
		<button type="button" class="btn btn-primary" onclick="showModal()">確認</button>
		<button type="button" class="btn btn-secondary" onclick="cancelRegistration()">キャンセル</button>
	</form>
</div>

<!-- モーダルウィンドウのHTML -->
<div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">入力内容確認</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p><strong>ユーザー名:</strong> <span id="modalName"></span></p>
				<p><strong>メールアドレス:</strong> <span id="modalEmail"></span></p>
				<p><strong>パスワード:</strong> **********</p>
				<p><strong>姓:</strong> <span id="modalFamilyName"></span></p>
				<p><strong>名:</strong> <span id="modalFirstName"></span></p>
				<p><strong>年齢:</strong> <span id="modalAge"></span></p>
				<p><strong>性別:</strong> <span id="modalGender"></span></p>
				<div>
					<strong>プロフィール画像:</strong>
					<img id="modalProfileImage" src="" alt="プロフィール画像" style="max-width: 100%; height: auto;">
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">戻る</button>
				<button type="submit" class="btn btn-primary" form="userForm">登録</button>
			</div>
		</div>
	</div>
</div>

<script>
	document.getElementById('profile_image').addEventListener('change', function(event) {
		const file = event.target.files[0];
		const reader = new FileReader();
		
		reader.onload = function(e) {
			const image = document.getElementById('modalProfileImage');
			image.src = e.target.result;
		};
		
		if (file) {
			reader.readAsDataURL(file);
		}
	});
	
	function showModal() {
		// 各フィールドの値を取得
		const name = document.getElementById('name').value;
		const email = document.getElementById('email').value;
		const familyName = document.getElementById('family_name').value;
		const firstName = document.getElementById('first_name').value;
		const age = document.getElementById('age').value;
		const gender = document.getElementById('gender').options[document.getElementById('gender').selectedIndex].text;

		// モーダルに値を設定
		document.getElementById('modalName').innerText = name;
		document.getElementById('modalEmail').innerText = email;
		document.getElementById('modalFamilyName').innerText = familyName;
		document.getElementById('modalFirstName').innerText = firstName;
		document.getElementById('modalAge').innerText = age;
		document.getElementById('modalGender').innerText = gender;

		// パスワードは伏字で表示（固定で**********を表示）
		// パスワードは入力された値そのものではなく固定で伏字表示
		const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
		modal.show();
	}

	function cancelRegistration() {
		window.location.href = '/';
	}
</script>

</body>
</html>
